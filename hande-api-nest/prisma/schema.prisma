// Hande Ride-Sharing API - Prisma Schema
// Migrated from Laravel MySQL to Supabase PostgreSQL
// Phase 1: Core tables (Users, Drivers, Riders, Trips, Daily Fees)

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider   = "postgresql"
  extensions = [postgis]
}

// ============================================================================
// CORE USER SYSTEM
// ============================================================================

model User {
  id                String    @id @default(uuid()) @db.Uuid
  firstName         String    @map("first_name") @db.VarChar(255)
  lastName          String    @map("last_name") @db.VarChar(255)
  email             String    @unique @db.VarChar(255)
  emailVerifiedAt   DateTime? @map("email_verified_at") @db.Timestamptz
  phoneVerifiedAt   DateTime? @map("phone_verified_at") @db.Timestamptz
  password          String    @db.VarChar(255)
  phone             String?   @db.VarChar(20)
  userType          UserType  @default(rider) @map("user_type")
  activeRole        UserType? @map("active_role")
  profileImage      String?   @map("profile_image") @db.VarChar(255)
  pushToken         String?   @map("push_token") @db.VarChar(255)
  isActive          Boolean   @default(true) @map("is_active")
  rememberToken     String?   @map("remember_token") @db.VarChar(100)
  createdAt         DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt         DateTime  @updatedAt @map("updated_at") @db.Timestamptz
  deletedAt         DateTime? @map("deleted_at") @db.Timestamptz

  // Relations
  driver Driver?
  rider  Rider?

  @@map("users")
}

enum UserType {
  admin
  driver
  rider
}

model PersonalAccessToken {
  id             BigInt    @id @default(autoincrement())
  tokenableType  String    @map("tokenable_type") @db.VarChar(255)
  tokenableId    String    @map("tokenable_id") @db.Uuid
  name           String    @db.VarChar(255)
  token          String    @unique @db.VarChar(64)
  abilities      String?   @db.Text
  lastUsedAt     DateTime? @map("last_used_at") @db.Timestamptz
  expiresAt      DateTime? @map("expires_at") @db.Timestamptz
  createdAt      DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt      DateTime  @updatedAt @map("updated_at") @db.Timestamptz

  @@index([tokenableType, tokenableId])
  @@map("personal_access_tokens")
}

model PasswordResetToken {
  email     String   @id @db.VarChar(255)
  token     String   @db.VarChar(255)
  createdAt DateTime @default(now()) @map("created_at") @db.Timestamptz

  @@map("password_reset_tokens")
}

// ============================================================================
// DRIVER SYSTEM
// ============================================================================

model Driver {
  id                   String         @id @default(uuid()) @db.Uuid
  userId               String         @unique @map("user_id") @db.Uuid
  licenseNumber        String         @unique @map("license_number") @db.VarChar(255)
  licenseExpiryDate    DateTime       @map("license_expiry_date") @db.Date
  licenseImage         String?        @map("license_image") @db.VarChar(255)
  licenseType          LicenseType    @map("license_type")
  yearsOfExperience    Int            @default(0) @map("years_of_experience")
  status               DriverStatus   @default(available)
  currentLatitude      Decimal?       @map("current_latitude") @db.Decimal(10, 8)
  currentLongitude     Decimal?       @map("current_longitude") @db.Decimal(11, 8)
  currentHeading       Int?           @map("current_heading")
  lastLocationUpdate   DateTime?      @map("last_location_update") @db.Timestamptz
  rating               Decimal        @default(0.00) @db.Decimal(3, 2)
  totalTrips           Int            @default(0) @map("total_trips")
  averageRating        Decimal        @default(0.00) @map("average_rating") @db.Decimal(3, 2)
  totalEarnings        Decimal        @default(0.00) @map("total_earnings") @db.Decimal(12, 2)
  walletBalance        Decimal        @default(0.00) @map("wallet_balance") @db.Decimal(12, 2)
  subscriptionExpiresAt DateTime?     @map("subscription_expires_at") @db.Timestamptz
  dailyFeeStatus       DailyFeeStatus @default(paid) @map("daily_fee_status")
  dailyFeePaidAt       DateTime?      @map("daily_fee_paid_at") @db.Timestamptz
  dailyFeeDueAt        DateTime?      @map("daily_fee_due_at") @db.Timestamptz
  dailyFeePenalty      Decimal        @default(0.00) @map("daily_fee_penalty") @db.Decimal(10, 2)
  vehiclePreferences   String?        @map("vehicle_preferences") @db.Text
  notes                String?        @db.Text
  createdAt            DateTime       @default(now()) @map("created_at") @db.Timestamptz
  updatedAt            DateTime       @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  user              User                @relation(fields: [userId], references: [id], onDelete: Cascade)
  vehicles          DriverVehicle[]
  trips             Trip[]
  bids              Bid[]
  dailyFees         DailyFee[]
  locations         DriverLocation[]
  documents         DriverDocument[]
  availabilities    DriverAvailability[]
  shifts            DriverShift[]
  earnings          DriverEarning[]
  payments          DriverPayment[]
  notifications     DriverNotification[]
  supportTickets    DriverSupportTicket[]
  ratings           DriverRating[]

  @@index([userId])
  @@index([status])
  @@index([dailyFeeStatus])
  @@map("table_drivers")
}

enum LicenseType {
  A
  B
  C
  D
}

enum DriverStatus {
  available
  on_trip
  off_duty
  suspended
}

enum DailyFeeStatus {
  paid
  pending
  grace_period
  overdue
  suspended
}

model DriverVehicle {
  id                         String    @id @default(uuid()) @db.Uuid
  driverId                   String    @map("driver_id") @db.Uuid
  make                       String    @db.VarChar(255)
  model                      String    @db.VarChar(255)
  year                       Int
  color                      String    @db.VarChar(50)
  licensePlate               String    @unique @map("license_plate") @db.VarChar(50)
  vehicleIdentificationNumber String?   @map("vehicle_identification_number") @db.VarChar(100)
  registrationDocument       String?   @map("registration_document") @db.VarChar(255)
  insuranceDocument          String?   @map("insurance_document") @db.VarChar(255)
  type                       String    @db.VarChar(50)
  capacity                   Int
  seats                      Int       @default(4)
  isActive                   Boolean   @default(true) @map("is_active")
  photo                      String?   @db.VarChar(255)
  photos                     String?   @db.Text
  status                     VehicleStatus @default(pending_approval)
  inspectionStatus           String?   @map("inspection_status") @db.VarChar(50)
  inspectionExpiry           DateTime? @map("inspection_expiry") @db.Date
  insuranceExpiry            DateTime? @map("insurance_expiry") @db.Date
  rejectionReason            String?   @map("rejection_reason") @db.Text
  createdAt                  DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt                  DateTime  @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  driver Driver @relation(fields: [driverId], references: [id], onDelete: Cascade)
  trips  Trip[]

  @@index([driverId])
  @@index([isActive])
  @@map("table_driver_vehicles")
}

model DriverDocument {
  id             String    @id @default(uuid()) @db.Uuid
  driverId       String    @map("driver_id") @db.Uuid
  documentType   String    @map("document_type") @db.VarChar(50)
  documentUrl    String    @map("document_url") @db.VarChar(255)
  documentNumber String?   @map("document_number") @db.VarChar(100)
  expiryDate     DateTime? @map("expiry_date") @db.Date
  verifiedAt     DateTime? @map("verified_at") @db.Timestamptz
  uploadedAt     DateTime  @default(now()) @map("uploaded_at") @db.Timestamptz
  createdAt      DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt      DateTime  @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  driver Driver @relation(fields: [driverId], references: [id], onDelete: Cascade)

  @@index([driverId])
  @@map("table_driver_documents")
}

model DriverAvailability {
  id              String   @id @default(uuid()) @db.Uuid
  driverId        String   @map("driver_id") @db.Uuid
  dayOfWeek       Int      @map("day_of_week")
  startTime       DateTime @map("start_time") @db.Time
  endTime         DateTime @map("end_time") @db.Time
  isAvailable     Boolean  @default(true) @map("is_available")
  createdAt       DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt       DateTime @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  driver Driver @relation(fields: [driverId], references: [id], onDelete: Cascade)

  @@index([driverId])
  @@map("table_driver_availabilities")
}

model DriverShift {
  id         String    @id @default(uuid()) @db.Uuid
  driverId   String    @map("driver_id") @db.Uuid
  startTime  DateTime  @map("start_time") @db.Timestamptz
  endTime    DateTime? @map("end_time") @db.Timestamptz
  duration   Int?      @db.Integer
  earnings   Decimal?  @db.Decimal(10, 2)
  tripCount  Int       @default(0) @map("trip_count")
  createdAt  DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt  DateTime  @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  driver Driver @relation(fields: [driverId], references: [id], onDelete: Cascade)

  @@index([driverId])
  @@map("table_driver_shifts")
}

model DriverEarning {
  id          String   @id @default(uuid()) @db.Uuid
  driverId    String   @map("driver_id") @db.Uuid
  tripId      String?  @map("trip_id") @db.Uuid
  amount      Decimal  @db.Decimal(10, 2)
  type        String   @db.VarChar(50)
  description String?  @db.Text
  earnedAt    DateTime @default(now()) @map("earned_at") @db.Timestamptz
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  driver Driver @relation(fields: [driverId], references: [id], onDelete: Cascade)

  @@index([driverId])
  @@map("table_driver_earnings")
}

model DriverPayment {
  id              String   @id @default(uuid()) @db.Uuid
  driverId        String   @map("driver_id") @db.Uuid
  amount          Decimal  @db.Decimal(10, 2)
  paymentMethod   String   @map("payment_method") @db.VarChar(50)
  transactionId   String?  @map("transaction_id") @db.VarChar(255)
  status          String   @db.VarChar(50)
  processedAt     DateTime? @map("processed_at") @db.Timestamptz
  createdAt       DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt       DateTime @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  driver Driver @relation(fields: [driverId], references: [id], onDelete: Cascade)

  @@index([driverId])
  @@map("table_driver_payments")
}

model DriverNotification {
  id         String    @id @default(uuid()) @db.Uuid
  driverId   String    @map("driver_id") @db.Uuid
  title      String    @db.VarChar(255)
  body       String    @db.Text
  type       String    @db.VarChar(50)
  data       Json?     @db.Json
  readAt     DateTime? @map("read_at") @db.Timestamptz
  sentAt     DateTime  @default(now()) @map("sent_at") @db.Timestamptz
  createdAt  DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt  DateTime  @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  driver Driver @relation(fields: [driverId], references: [id], onDelete: Cascade)

  @@index([driverId])
  @@map("table_driver_notifications")
}

model DriverSupportTicket {
  id          String   @id @default(uuid()) @db.Uuid
  driverId    String   @map("driver_id") @db.Uuid
  subject     String   @db.VarChar(255)
  description String   @db.Text
  status      String   @db.VarChar(50)
  priority    String   @db.VarChar(50)
  resolvedAt  DateTime? @map("resolved_at") @db.Timestamptz
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  driver Driver @relation(fields: [driverId], references: [id], onDelete: Cascade)

  @@index([driverId])
  @@map("table_driver_support_tickets")
}

model DriverRating {
  id          String    @id @default(uuid()) @db.Uuid
  driverId    String    @map("driver_id") @db.Uuid
  riderId     String    @map("rider_id") @db.Uuid
  tripId      String    @map("trip_id") @db.Uuid
  rating      Int
  feedback    String?   @db.Text
  createdAt   DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime  @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  driver Driver @relation(fields: [driverId], references: [id], onDelete: Cascade)
  rider  Rider  @relation(fields: [riderId], references: [id], onDelete: Cascade)

  @@index([driverId])
  @@index([riderId])
  @@index([tripId])
  @@map("table_driver_ratings")
}

// ============================================================================
// DAILY FEE SYSTEM ($1/day subscription)
// ============================================================================

model DailyFee {
  id               String         @id @default(uuid()) @db.Uuid
  driverId         String         @map("driver_id") @db.Uuid
  amount           Decimal        @default(1.00) @db.Decimal(10, 2)
  penaltyAmount    Decimal        @default(0.00) @map("penalty_amount") @db.Decimal(10, 2)
  totalAmount      Decimal        @default(1.00) @map("total_amount") @db.Decimal(10, 2)
  currency         String         @default("USD") @db.VarChar(3)
  status           FeeStatus      @default(pending)
  feeDate          DateTime       @map("fee_date") @db.Date
  dueAt            DateTime?      @map("due_at") @db.Timestamptz
  expiresAt        DateTime?      @map("expires_at") @db.Timestamptz
  gracePeriodEndsAt DateTime?     @map("grace_period_ends_at") @db.Timestamptz
  paidAt           DateTime?      @map("paid_at") @db.Timestamptz
  paymentMethodId  String?        @map("payment_method_id") @db.Uuid
  transactionId    String?        @map("transaction_id") @db.Uuid
  autoDeducted     Boolean        @default(false) @map("auto_deducted")
  notes            String?        @db.Text
  createdAt        DateTime       @default(now()) @map("created_at") @db.Timestamptz
  updatedAt        DateTime       @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  driver Driver @relation(fields: [driverId], references: [id], onDelete: Cascade)

  @@index([driverId])
  @@index([status])
  @@index([feeDate])
  @@index([driverId, feeDate])
  @@index([driverId, status])
  @@map("table_daily_fees")
}

enum FeeStatus {
  pending
  paid
  grace_period
  overdue
  suspended
  waived
}

enum VehicleStatus {
  pending_approval
  approved
  rejected
}

// ============================================================================
// RIDER SYSTEM
// ============================================================================

model Rider {
  id                   String    @id @default(uuid()) @db.Uuid
  userId               String    @unique @map("user_id") @db.Uuid
  status               RiderStatus @default(active)
  currentLatitude      Decimal?  @map("current_latitude") @db.Decimal(10, 8)
  currentLongitude     Decimal?  @map("current_longitude") @db.Decimal(11, 8)
  lastLocationUpdate   DateTime? @map("last_location_update") @db.Timestamptz
  rating               Decimal   @default(0.00) @db.Decimal(3, 2)
  averageRating        Decimal   @default(0.00) @map("average_rating") @db.Decimal(3, 2)
  totalTrips           Int       @default(0) @map("total_trips")
  paymentPreferences   String?   @map("payment_preferences") @db.Text
  notes                String?   @db.Text
  createdAt            DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt            DateTime  @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  user              User            @relation(fields: [userId], references: [id], onDelete: Cascade)
  trips             Trip[]
  payments          Payment[]
  favoriteLocations FavoriteLocation[]
  emergencyContacts EmergencyContact[]
  ratings           DriverRating[]

  @@index([userId])
  @@index([status])
  @@map("table_riders")
}

enum RiderStatus {
  active
  inactive
  suspended
}

model FavoriteLocation {
  id          String   @id @default(uuid()) @db.Uuid
  riderId     String   @map("rider_id") @db.Uuid
  name        String   @db.VarChar(255)
  address     String   @db.VarChar(255)
  latitude    Decimal  @db.Decimal(10, 8)
  longitude   Decimal  @db.Decimal(11, 8)
  type        String?  @db.VarChar(50)
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  rider Rider @relation(fields: [riderId], references: [id], onDelete: Cascade)

  @@index([riderId])
  @@map("favorite_locations")
}

model EmergencyContact {
  id          String   @id @default(uuid()) @db.Uuid
  riderId     String   @map("rider_id") @db.Uuid
  name        String   @db.VarChar(255)
  phone       String   @db.VarChar(20)
  relationship String? @db.VarChar(50)
  isPrimary   Boolean  @default(false) @map("is_primary")
  createdAt   DateTime @default(now()) @map("created_at") @db.Timestamptz
  updatedAt   DateTime @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  rider Rider @relation(fields: [riderId], references: [id], onDelete: Cascade)

  @@index([riderId])
  @@map("emergency_contacts")
}

// ============================================================================
// TRIP SYSTEM
// ============================================================================

model Trip {
  id                  String      @id @default(uuid()) @db.Uuid
  driverId            String?     @map("driver_id") @db.Uuid
  riderId             String?     @map("rider_id") @db.Uuid
  vehicleId           String?     @map("vehicle_id") @db.Uuid
  
  // Location data
  startLatitude       Decimal     @map("start_latitude") @db.Decimal(10, 8)
  startLongitude      Decimal     @map("start_longitude") @db.Decimal(11, 8)
  endLatitude         Decimal     @map("end_latitude") @db.Decimal(10, 8)
  endLongitude        Decimal     @map("end_longitude") @db.Decimal(11, 8)
  startAddress        String      @map("start_address") @db.VarChar(255)
  endAddress          String      @map("end_address") @db.VarChar(255)
  pickupAddress       String?     @map("pickup_address") @db.VarChar(255)
  destinationAddress  String?     @map("destination_address") @db.VarChar(255)
  
  // Trip metrics
  distance            Decimal     @db.Decimal(8, 2)
  duration            Int
  polyline            String?     @db.Text
  actualDistance      Decimal?    @map("actual_distance") @db.Decimal(8, 2)
  actualDuration      Int?        @map("actual_duration")
  routePolyline       String?     @map("route_polyline") @db.Text
  
  // Fare information
  estimatedFare       Decimal     @map("estimated_fare") @db.Decimal(8, 2)
  offeredFare         Decimal?    @map("offered_fare") @db.Decimal(8, 2)
  finalFare           Decimal?    @map("final_fare") @db.Decimal(8, 2)
  fareCurrency        String      @default("USD") @map("fare_currency") @db.VarChar(3)
  paymentMethod       String?     @map("payment_method") @db.VarChar(50)
  surgeMultiplier     Decimal?    @map("surge_multiplier") @db.Decimal(3, 2)
  
  // Status and timestamps
  status              TripStatus  @default(pending)
  scheduledFor        DateTime?   @map("scheduled_for") @db.Timestamptz
  driverAssignedAt    DateTime?   @map("driver_assigned_at") @db.Timestamptz
  driverDepartedAt    DateTime?   @map("driver_departed_at") @db.Timestamptz
  driverArrivedAt     DateTime?   @map("driver_arrived_at") @db.Timestamptz
  pickupAt            DateTime?   @map("pickup_at") @db.Timestamptz
  startedAt           DateTime?   @map("started_at") @db.Timestamptz
  completedAt         DateTime?   @map("completed_at") @db.Timestamptz
  cancelledAt         DateTime?   @map("cancelled_at") @db.Timestamptz
  
  // Additional info
  cancelledBy         String?     @map("cancelled_by") @db.VarChar(50)
  cancellationReason  String?     @map("cancellation_reason") @db.Text
  vehicleType         String?     @map("vehicle_type") @db.VarChar(50)
  notes               String?     @db.Text
  riskScore           Decimal?    @map("risk_score") @db.Decimal(5, 2)
  riskFlags           Json?       @map("risk_flags") @db.Json
  
  createdAt           DateTime    @default(now()) @map("created_at") @db.Timestamptz
  updatedAt           DateTime    @updatedAt @map("updated_at") @db.Timestamptz
  deletedAt           DateTime?   @map("deleted_at") @db.Timestamptz

  // Relations
  driver  Driver?        @relation(fields: [driverId], references: [id], onDelete: Cascade)
  rider   Rider?         @relation(fields: [riderId], references: [id], onDelete: Cascade)
  vehicle DriverVehicle? @relation(fields: [vehicleId], references: [id], onDelete: Cascade)
  bids    Bid[]

  @@index([driverId, status])
  @@index([riderId, status])
  @@index([createdAt, status], name: "idx_trips_status_created")
  @@index([status])
  @@map("table_trips")
}

enum TripStatus {
  pending
  searching
  driver_assigned
  driver_en_route
  driver_arrived
  in_progress
  completed
  cancelled
  payment_failed
}

model Payment {
  id              String    @id @default(uuid()) @db.Uuid
  riderId         String    @map("rider_id") @db.Uuid
  tripId          String?   @map("trip_id") @db.Uuid
  amount          Decimal   @db.Decimal(10, 2)
  paymentMethod   String    @map("payment_method") @db.VarChar(50)
  transactionId   String?   @map("transaction_id") @db.VarChar(255)
  status          String    @db.VarChar(50)
  processedAt     DateTime? @map("processed_at") @db.Timestamptz
  createdAt       DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt       DateTime  @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  rider Rider @relation(fields: [riderId], references: [id], onDelete: Cascade)

  @@index([riderId])
  @@index([tripId])
  @@map("table_payments")
}

// ============================================================================
// BIDDING SYSTEM
// ============================================================================

model Bid {
  id                    String    @id @default(uuid()) @db.Uuid
  tripId                String    @map("trip_id") @db.Uuid
  driverId              String    @map("driver_id") @db.Uuid
  amount                Decimal   @db.Decimal(10, 2)
  message               String?   @db.VarChar(255)
  estimatedArrivalTime  Int?      @map("estimated_arrival_time")
  status                BidStatus @default(pending)
  createdAt             DateTime  @default(now()) @map("created_at") @db.Timestamptz
  updatedAt             DateTime  @updatedAt @map("updated_at") @db.Timestamptz

  // Relations
  trip   Trip   @relation(fields: [tripId], references: [id], onDelete: Cascade)
  driver Driver @relation(fields: [driverId], references: [id], onDelete: Cascade)

  @@index([tripId, status])
  @@index([driverId, status])
  @@map("table_bids")
}

enum BidStatus {
  pending
  accepted
  rejected
}

// ============================================================================
// REAL-TIME LOCATION TRACKING
// Note: Using composite PK for efficient time-series queries
// ============================================================================

model DriverLocation {
  id         String   @id @default(uuid()) @db.Uuid
  driverId   String   @map("driver_id") @db.Uuid
  latitude   Decimal  @db.Decimal(10, 8)
  longitude  Decimal  @db.Decimal(11, 8)
  heading    Int?
  speed      Decimal? @db.Decimal(5, 2)
  accuracy   Decimal? @db.Decimal(6, 2)
  recordedAt DateTime @default(now()) @map("recorded_at") @db.Timestamptz

  // Relations
  driver Driver @relation(fields: [driverId], references: [id], onDelete: Cascade)

  @@index([driverId, recordedAt])
  @@index([recordedAt])
  @@map("driver_locations")
}

// ============================================================================
// BACKGROUND JOBS & QUEUES
// ============================================================================

model Job {
  id           BigInt   @id @default(autoincrement())
  queue        String   @db.VarChar(255)
  payload      String   @db.Text
  attempts     Int      @default(0) @db.SmallInt
  reservedAt   Int?     @map("reserved_at")
  availableAt  Int      @map("available_at")
  createdAt    Int      @map("created_at")

  @@index([queue])
  @@map("jobs")
}

model FailedJob {
  id          BigInt   @id @default(autoincrement())
  uuid        String   @unique @db.Uuid
  connection  String   @db.Text
  queue       String   @db.Text
  payload     String   @db.Text
  exception   String   @db.Text
  failedAt    DateTime @default(now()) @map("failed_at") @db.Timestamptz

  @@map("failed_jobs")
}

